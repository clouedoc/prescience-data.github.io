<html lang="en">
<head>
  <title>Touch Swipe Recorder</title>
  <style type="text/css">
	  body {
		  height: 100%;
		  width: 100%;
		  padding: 0;
		  margin: 0;
		  background: #0a1b2b;
		  color: #fafcfc;
	  }

	  #swiper {
		  height: 100vh;
		  width: 100%;
		  padding: 20px;
		  color: #3ce4b3;
		  text-shadow: 0 0 3px rgba(219 250 241, 0.6);
		  line-height: 16px;
		  font-size: 10px;
		  font-family: monospace;
		  overflow: hidden;
	  }
  </style>
</head>
<body>
<div id="scroller">
  Waiting...
</div>
<script type="text/javascript">
  (function() {
    var COLLECTION_ENDPOINT = "https://a9898beab729ed12d3e037481c48efba.m.pipedream.net"
    var $scroller = document.getElementById("scroller")
    var scrolls = []
    var scroll = []

    var push = function(data) {
      var xhr = new XMLHttpRequest();
      xhr.open("POST", COLLECTION_ENDPOINT, true);
      xhr.setRequestHeader('Content-Type', 'application/json');
      xhr.send(JSON.stringify({
                                data: data,
                                timestamp: Date.now()
                              }));
    }

    var listener = function(event) {
      scroll.push(event)
    }

    var closer = function(event) {
      scroll.push(event)
      scrolls.push(scrolls)
      $scroller.innerText = JSON.stringify(scroll, undefined, 2)
      push(scroll)
      scroll = []
    }

    document.addEventListener('touchmove', listener, !0);
    document.addEventListener('touchstart', listener, !0);
    document.addEventListener('touchend', closer, !0);
    document.addEventListener('touchcancel', listener, !0);
    document.addEventListener('mousemove', listener, !0);
    document.addEventListener('click', listener, !0);
    document.addEventListener('mousedown', listener, !0);
    document.addEventListener('mouseup', closer, !0);
    document.addEventListener('pointerdown', listener, !0);
    document.addEventListener('pointerup', closer, !0);

  })()
</script>
</body>
</html>
